webpackJsonp([0,2],{0:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r(1);var u=r(5),a=n(u),o=r(157),i=n(o),c=r(158),l=n(c),s=r(288),f=n(s),d=r(363),p=n(d),h=r(364),y=n(h);(0,y["default"])(f["default"],p["default"],"app"),i["default"].render(a["default"].createElement(l["default"],null),document.getElementById("app"))},1:function(e,t){},158:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var s=r(159),f=(n(s),r(183)),d=n(f),p=r(5),h=n(p),y=r(194),v=n(y),b=r(287),g=n(b),m=r(305),P=n(m),O=r(199),_=r(308),E=n(_),j=(i=(0,O.DragDropContext)(E["default"]),i(c=function(e){function t(){return u(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){return h["default"].createElement("div",null,h["default"].createElement("button",{className:"add-path",onClick:this.addPath},"+"),h["default"].createElement(d["default"],{stores:[P["default"]],inject:{paths:function(){return P["default"].getState().paths}}},h["default"].createElement(v["default"],null)))}},{key:"addPath",value:function(){g["default"].create({name:"New Path"})}}]),t}(h["default"].Component))||c);t["default"]=j},194:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(5),a=n(u),o=r(195),i=n(o),c=function(e){var t=e.paths;return a["default"].createElement("div",{className:"paths"},t.map(function(e){return a["default"].createElement(i["default"],{className:"path",key:e.id,path:e})}))};c.propTypes={paths:a["default"].PropTypes.array},c.defaultProps={paths:[]},t["default"]=c},195:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,l,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var f=r(183),d=n(f),p=r(5),h=n(p),y=r(196),v=n(y),b=r(303),g=n(b),m=r(304),P=n(m),O=r(287),_=n(O),E=r(197),j=n(E),k=r(199),w=r(286),T=n(w),S={hover:function(e,t){var r=t.getItem(),n=r.id;e.path.resources.length||_["default"].attachToPath({pathId:e.path.id,resourceId:n})}},M=(c=(0,k.DropTarget)(T["default"].RESOURCE,S,function(e){return{connectDropTarget:e.dropTarget()}}),c(l=function(e){function t(e){a(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e)),n=e.path.id;return r.addResource=r.addResource.bind(r,n),r.deleteResource=r.deleteResource.bind(r,n),r.editName=r.editName.bind(r,n),r.deletePath=r.deletePath.bind(r,n),r.activatePathEdit=r.activatePathEdit.bind(r,n),r}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,r=e.path,n=u(e,["connectDropTarget","path"]);return t(h["default"].createElement("div",n,h["default"].createElement("div",{className:"path-header",onClick:this.activatePathEdit},h["default"].createElement("div",{className:"path-add-resource"},h["default"].createElement("button",{onClick:this.addResource},"+")),h["default"].createElement(j["default"],{className:"path-name",editing:r.editing,value:r.name,onEdit:this.editName}),h["default"].createElement("div",{className:"path-delete"},h["default"].createElement("button",{onClick:this.deletePath},"x"))),h["default"].createElement(d["default"],{stores:[P["default"]],inject:{resources:function(){return P["default"].getResourcesByIds(r.resources)}}},h["default"].createElement(v["default"],{onValueClick:this.activateResourceEdit,onEdit:this.editResource,onDelete:this.deleteResource}))))}},{key:"addResource",value:function(e,t){t.stopPropagation();var r=g["default"].create({task:"New Task"});_["default"].attachToPath({resourceId:r.id,pathId:e})}},{key:"editResource",value:function(e,t){g["default"].update({id:e,task:t,editing:!1})}},{key:"deleteResource",value:function(e,t){g["default"]["delete"](t)}},{key:"editName",value:function(e,t){_["default"].update({id:e,name:t,editing:!1})}},{key:"deletePath",value:function(e){_["default"]["delete"](e)}},{key:"activatePathEdit",value:function(e){_["default"].update({id:e,editing:!0})}},{key:"activateResourceEdit",value:function(e){g["default"].update({id:e,editing:!0})}}]),t}(h["default"].Component))||l);M.propTypes={path:h["default"].PropTypes.shape({id:h["default"].PropTypes.string.isRequired,editing:h["default"].PropTypes.bool,name:h["default"].PropTypes.string,resources:h["default"].PropTypes.array}).isRequired,connectDropTarget:h["default"].PropTypes.func},M.defaultProps={name:"",resources:[]},t["default"]=M},196:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(5),a=n(u),o=r(197),i=n(o),c=r(198),l=n(c),s=r(287),f=n(s),d=function(e){var t=e.resources,r=e.onValueClick,n=e.onEdit,u=e.onDelete;return a["default"].createElement("ul",{className:"resources"},t.map(function(e){return a["default"].createElement(l["default"],{className:"resource",id:e.id,key:e.id,onMove:f["default"].move},a["default"].createElement(i["default"],{editing:e.editing,value:e.task,onValueClick:r.bind(null,e.id),onEdit:n.bind(null,e.id),onDelete:u.bind(null,e.id)}))}))};d.propTypes={resources:a["default"].PropTypes.array,onEdit:a["default"].PropTypes.func,onDelete:a["default"].PropTypes.func,onValueClick:a["default"].PropTypes.func},d.defaultProps={resources:[],onEdit:function(){}},t["default"]=d},197:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=r(5),s=n(l),f=function(e){function t(){var e,r,n,u;a(this,t);for(var i=arguments.length,c=Array(i),l=0;i>l;l++)c[l]=arguments[l];return r=n=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.renderEdit=function(){return s["default"].createElement("input",{type:"text",ref:function(e){return e?e.selectionStart=n.props.value.length:null},autoFocus:!0,defaultValue:n.props.value,onBlur:n.finishEdit,onKeyPress:n.checkEnter})},n.renderValue=function(){var e=n.props.onDelete;return s["default"].createElement("div",{onClick:n.props.onValueClick},s["default"].createElement("span",{className:"value"},n.props.value),e?n.renderDelete():null)},n.renderDelete=function(){return s["default"].createElement("button",{className:"delete",onClick:n.props.onDelete},"x")},n.checkEnter=function(e){"Enter"===e.key&&n.finishEdit(e)},n.finishEdit=function(e){var t=e.target.value;t.trim()&&n.props.onEdit(t)},u=r,o(n,u)}return i(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=(e.value,e.onEdit,e.onValueClick,e.editing),r=u(e,["value","onEdit","onValueClick","editing"]);return s["default"].createElement("div",r,t?this.renderEdit():this.renderValue())}}]),t}(s["default"].Component);f.propTypes={value:s["default"].PropTypes.string,editing:s["default"].PropTypes.bool,onEdit:s["default"].PropTypes.func.isRequired,onDelete:s["default"].PropTypes.func,onValueClick:s["default"].PropTypes.func},f.defaultProps={value:"",editing:!1,onEdit:function(){}},t["default"]=f},198:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,l,s,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var p=r(5),h=n(p),y=r(199),v=r(286),b=n(v),g={beginDrag:function(e){return{id:e.id}},isDragging:function(e,t){return e.id===t.getItem().id}},m={hover:function(e,t){var r=e.id,n=t.getItem(),u=n.id;u!==r&&e.onMove({sourceId:u,targetId:r})}},P=(c=(0,y.DragSource)(b["default"].RESOURCE,g,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}),l=(0,y.DropTarget)(b["default"].RESOURCE,m,function(e){return{connectDropTarget:e.dropTarget()}}),c(s=l(s=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.connectDragSource,r=e.connectDropTarget,n=e.isDragging,a=(e.onMove,e.id,u(e,["connectDragSource","connectDropTarget","isDragging","onMove","id"]));return t(r(h["default"].createElement("li",f({style:{opacity:n?0:1}},a),a.children)))}}]),t}(h["default"].Component))||s)||s);P.propTypes={id:h["default"].PropTypes.string.isRequired,connectDragSource:h["default"].PropTypes.func,connectDropTarget:h["default"].PropTypes.func,isDragging:h["default"].PropTypes.bool,onMove:h["default"].PropTypes.func},P.defaultProps={onMove:function(){}},t["default"]=P},286:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={RESOURCE:"resource"}},287:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(288),a=n(u);t["default"]=a["default"].generateActions("create","update","delete","attachToPath","move")},288:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(289),a=n(u),o=r(302),i=n(o),c=new a["default"];(0,i["default"])(c),t["default"]=c},302:function(e,t){"use strict";function r(e){return"undefined"!=typeof window&&(window["alt.js.org"]=e),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,e.exports=t["default"]},303:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(288),a=n(u);t["default"]=a["default"].generateActions("create","update","delete")},304:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(159),c=n(i),l=r(288),s=n(l),f=r(303),d=n(f),p=function(){function e(){u(this,e),this.bindActions(d["default"]),this.resources=[],this.exportPublicMethods({getResourcesByIds:this.getResourcesByIds.bind(this)})}return o(e,[{key:"create",value:function(e){var t=this.resources;return e.id=c["default"].v4(),this.setState({resources:t.concat(e)}),e}},{key:"update",value:function(e){var t=this.resources.map(function(t){return t.id===e.id?a({},t,e):t});this.setState({resources:t})}},{key:"delete",value:function(e){this.setState({resources:this.resources.filter(function(t){return t.id!==e})})}},{key:"getResourcesByIds",value:function(e){var t=this;return(e||[]).map(function(e){return t.resources.filter(function(t){return t.id===e})}).filter(function(e){return e.length}).map(function(e){return e[0]})}}]),e}();t["default"]=s["default"].createStore(p,"ResourceStore")},305:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(159),c=n(i),l=r(288),s=n(l),f=r(287),d=n(f),p=r(306),h=n(p),y=function(){function e(){u(this,e),this.bindActions(d["default"]),this.paths=[]}return o(e,[{key:"create",value:function(e){var t=this.paths;e.id=c["default"].v4(),e.resources=e.resources||[],this.setState({paths:t.concat(e)})}},{key:"update",value:function(e){var t=this.paths.map(function(t){return t.id===e.id?a({},t,e):t});this.setState({paths:t})}},{key:"delete",value:function(e){this.setState({paths:this.paths.filter(function(t){return t.id!==e})})}},{key:"attachToPath",value:function(e){var t=e.pathId,r=e.resourceId,n=this.paths.map(function(e){return e.resources.indexOf(r)>=0&&(e.resources=e.resources.filter(function(e){return e!==r})),e.id===t&&(-1===e.resources.indexOf(r)?e.resources.push(r):console.warn("Already attached resource to path",n)),e});this.setState({paths:n})}},{key:"move",value:function(e){var t=e.sourceId,r=e.targetId,n=this.paths,u=n.filter(function(e){return e.resources.indexOf(t)>=0})[0],a=n.filter(function(e){return e.resources.indexOf(r)>=0})[0],o=u.resources.indexOf(t),i=a.resources.indexOf(r);u===a?u.resources=(0,h["default"])(u.resources,{$splice:[[o,1],[i,0,t]]}):(u.resources.splice(o,1),a.resources.splice(i,0,t)),this.setState({paths:n})}}]),e}();t["default"]=s["default"].createStore(y,"PathStore")},363:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={get:function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return null}},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}}},364:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,r){var n=(0,a["default"])(e);try{e.bootstrap(t.get(r))}catch(u){console.error("Failed to bootstrap data",u)}n.listen(function(){t.get("debug")||t.set(r,e.takeSnapshot())})};var u=r(365),a=n(u)},365:function(e,t){"use strict";function r(){var e=this;this.dispatcher.register(function(t){var r=Object.keys(e.alt.stores).reduce(function(t,r){return t.push(e.alt.stores[r].dispatchToken),t},[]);e.waitFor(r),e.setState({payload:t}),e.emitChange()})}function n(e){return e.FinalStore?e.FinalStore:e.FinalStore=e.createUnsavedStore(r)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]}});